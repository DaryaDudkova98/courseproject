{% block content %}
{% if form is defined %}
    <div class="card mb-4">
        <div class="card-body">
            <h5>New Item</h5>
            {{ form_start(form) }}
            {{ form_widget(form) }}
            <button type="submit" class="btn btn-success mt-3">Create Item</button>
            {{ form_end(form) }}
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap5.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    
    <script src="https://cdn.ckeditor.com/4.19.0/standard/ckeditor.js"></script>
    
    <script>
        console.log('=== НАЧАЛО ИНИЦИАЛИЗАЦИИ ===');
        console.log('jQuery loaded:', typeof jQuery !== 'undefined', 'version:', jQuery ? jQuery.fn.jquery : 'none');
        console.log('Select2 loaded:', typeof $.fn.select2 !== 'undefined');
        console.log('CKEditor loaded:', typeof CKEDITOR !== 'undefined');
        
        $(document).ready(function() {
            console.log('Initializing editors...');
            
            var writersSelect = $('select[multiple]');
            console.log('Found', writersSelect.length, 'multiple select elements');
            
            if (writersSelect.length > 0) {
                writersSelect.select2({
                    theme: 'bootstrap4',
                    placeholder: 'Select writers...',
                    allowClear: true,
                    width: '100%'
                });
                console.log('✅ Select2 successfully initialized!');
            }
            
            var descriptionField = $('textarea[name*="description"]');
            console.log('Found description field:', descriptionField.length);
            
            if (descriptionField.length > 0 && typeof CKEDITOR !== 'undefined') {

                descriptionField.addClass('ckeditor');
                
                CKEDITOR.replace(descriptionField[0], {
                    toolbar: [
                        { name: 'basicstyles', items: ['Bold', 'Italic', 'Underline', 'Strike'] },
                        { name: 'paragraph', items: ['NumberedList', 'BulletedList', '-', 'Blockquote'] },
                        { name: 'links', items: ['Link', 'Unlink'] },
                        { name: 'insert', items: ['Image', 'Table'] },
                        { name: 'tools', items: ['Maximize', 'Source'] }
                    ],
                    height: 250,
                    language: 'en',
                    removeButtons: 'Subscript,Superscript',
                    format_tags: 'p;h2;h3;h4;pre'
                });
                
                console.log('✅ CKEditor successfully initialized!');
            }
            
            console.log('=== ALL EDITORS ARE INITIALIZED ===');
        });
    </script>
{% endif %}
{% endblock %}