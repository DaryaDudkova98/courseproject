{# templates/inventory/api_token.html.twig #}
{% if field.value %}
    <div class="api-token-container">
        <h5>API Token –¥–ª—è Odoo</h5>
        
        {% set inventory = ea.entity.instance %}
        
        <div class="input-group mb-3">
            <input type="text" 
                   class="form-control" 
                   id="apiToken_{{ inventory.id }}"
                   value="{{ field.value }}" 
                   readonly
                   style="font-family: monospace;">
            <button class="btn btn-outline-secondary" 
                    type="button" 
                    onclick="copyToken('apiToken_{{ inventory.id }}')">
                üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
            </button>
        </div>
        
        {% if inventory.apiTokenGeneratedAt %}
            <p class="text-muted">
                <small>–°–æ–∑–¥–∞–Ω: {{ inventory.apiTokenGeneratedAt|date('d.m.Y H:i') }}</small>
            </p>
        {% endif %}
        
        <div class="alert alert-info mt-3">
            <strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Odoo:</strong><br>
            –î–æ–±–∞–≤—å—Ç–µ –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø—Ä–æ—Å–∞:<br>
            <code>Authorization: Bearer {{ field.value }}</code>
        </div>
    </div>
    
    <script>
    function copyToken(elementId) {
        const input = document.getElementById(elementId);
        input.select();
        document.execCommand('copy');
        
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = '‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
        button.classList.add('btn-success');
        
        setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove('btn-success');
        }, 2000);
    }
    </script>
{% else %}
    <div class="alert alert-warning">
        <p><strong>‚ö†Ô∏è API —Ç–æ–∫–µ–Ω –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω</strong></p>
        <p>–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Odoo –Ω–µ–æ–±—Ö–æ–¥–∏–º API —Ç–æ–∫–µ–Ω.</p>
        <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Generate API Token" –≤—ã—à–µ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω.</p>
    </div>
{% endif %}